% Provides environments for theorems, proofs, etc.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wfs-theorem}[2019/04/24 v1.0]

\RequirePackage{hyperref} % loads nameref at \begin{document}
\RequirePackage{wfs-notation}
\RequirePackage{amsthm, thmtools}
\RequirePackage[capitalize]{cleveref}
\newcommand{\crefrangeconjunction}{--}
\RequirePackage{wfs-autonum}
\RequirePackage{framed}
\RequirePackage{enumitem}

%%%%%%%%
% body %
%%%%%%%%
\newcommand*\wfsnameref[1]{\nameref*{#1} (\cref{#1})}

\Crefname{section}{Section}{Sections}
\crefname{section}{Sec.}{Secs.}

\creflabelformat{equation}{#2#1#3}
\newcommand\pref\eqref % parenthetical reference

% superscript instead of 'Footnote N'
\crefformat{footnote}{#2\footnotemark[#1]#3}

% styles
%%%%%%%%%%
\declaretheoremstyle[
	headfont=\bfseries, notefont=\bfseries, bodyfont=\normalfont,
	headpunct=., postheadspace=0.5em,
	spaceabove=2ex, spacebelow=2ex, qed=\filledQED,
]{bold+qed}

\declaretheoremstyle[
	headfont=\itshape, notefont=\itshape, bodyfont=\normalfont,
	headpunct=:, postheadspace=0.5em,
	spaceabove=2ex, spacebelow=2ex, qed=\openQED,
]{italic+qed}

\declaretheoremstyle[
	headfont=\bfseries\itshape, notefont=\itshape, bodyfont=\normalfont,
	headpunct=:, postheadspace=0.5em,
	spaceabove=2ex, spacebelow=2ex, qed=\filledQED,
]{bold+italic+qed}

% environments
%%%%%%%%%%%%%%%%
\@ifclassloaded{book}{\newcommand*\toplevel{chapter}}{}
\@ifclassloaded{report}{\newcommand*\toplevel{chapter}}{}
\@ifclassloaded{article}{\newcommand*\toplevel{section}}{}

% style=bold+qed

%% problem-like
\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Problem,Problems},
	refname={Prob.,Probs.},
]{problem}

\declaretheorem[style=bold+qed, parent=\toplevel,
    Refname={Example,Examples},
    refname={Ex.,Exs.},
]{example}

%% assumption-like

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Definition,Definitions},
	refname={Def.,Defs.},
]{definition}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Assumption,Assumptions},
	refname={Asmp.,Asmps.},
]{assumption}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Postulate,Postulates},
	refname={Post.,Posts.},
]{postulate}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Axiom,Axioms},
	refname={Ax.,Axs.},
]{axiom}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Proposition,Propositions},
	refname={Prop.,Props.},
]{proposition}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Conjecture,Conjectures},
	refname={Conj.,Conjs.},
]{conjecture}

%% theorem-like

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Theorem,Theorems},
	refname={Thm.,Thms.},
]{theorem}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Law,Laws},
	refname={Law,Laws},
]{law}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Lemma,Lemmas},
	refname={Lem.,Lems.},
]{lemma}

% style=bold+italic+qed

\declaretheorem[style=bold+italic+qed, parent=\toplevel,
	Refname={Corollary,Corollaries},
	refname={Cor.,Cors.},
]{corollary}

% style=italic+qed

%% proof-like

\let\proof\@undefined
\declaretheorem[style=italic+qed, numbered=no]{proof}
\declaretheorem[style=italic+qed, numbered=no]{derivation}
\declaretheorem[style=italic+qed, numbered=no]{solution}
\declaretheorem[style=italic+qed, numbered=no]{argument}

% enumitem lists
%%%%%%%%%%%%%%%%%
\newlist{assumptions}{enumerate}{9}
\setlist[assumptions]{label*=\arabic*.,ref=\theassumption.\arabic*}

\crefname{assumptionsi}{Asmp.}{Asmps.}
\Crefname{assumptionsi}{Assumption}{Assumptions}
