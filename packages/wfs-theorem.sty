\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wfs-theorem}[2019/04/16]

\RequirePackage{amsthm, thmtools}
\RequirePackage{wfs-notation}
\RequirePackage[capitalize, nameinlink]{cleveref}
\newcommand{\crefrangeconjunction}{--}
% implements mathtools's showonlyrefs in a cleveref-compatible way
\RequirePackage{autonum}

\@ifclassloaded{book}{\newcommand*\toplevel{chapter}}{}
\@ifclassloaded{report}{\newcommand*\toplevel{chapter}}{}
\@ifclassloaded{article}{\newcommand*\toplevel{section}}{}

% styles
%%%%%%%%%%
\declaretheoremstyle[
	headfont=\bfseries, notefont=\bfseries, bodyfont=\normalfont,
	headpunct=., postheadspace=0.5em,
]{bold}

\declaretheoremstyle[
	headfont=\bfseries, notefont=\bfseries, bodyfont=\normalfont,
	headpunct=., postheadspace=0.5em,
	spaceabove=2ex, spacebelow=2ex, qed=\filledQED,
]{bold+qed}

\declaretheoremstyle[
	headfont=\itshape, notefont=\itshape, bodyfont=\normalfont,
	headpunct=:, postheadspace=0.5em,
	spaceabove=2ex, spacebelow=2ex, qed=\openQED,
]{italic+qed}

% environments
%%%%%%%%%%%%%%%%
\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Definition,Definitions},
	refname={Def.,Defs.},
]{definition}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Axiom,Axioms},
	refname={Ax.,Axs.},
]{axiom}
\declaretheorem[style=bold+qed, sibling=axiom,
	Refname={Postulate,Postulates},
	refname={Post.,Posts.},
]{postulate}

\declaretheorem[style=bold, parent=\toplevel,
	shaded={
		rulewidth=1pt, rulecolor=black, bgcolor=white,
		textwidth=0.95\linewidth, margin=0.025\linewidth,
	},
	Refname={Theorem,Theorems},
	refname={Thm.,Thms.},
]{theorem}
\declaretheorem[style=bold, sibling=theorem,
	shaded={
		rulewidth=1pt, rulecolor=black, bgcolor=white,
		textwidth=0.95\linewidth, margin=0.025\linewidth,
	},
	Refname={Law,Laws},
	refname={Law,Laws},
]{law}
\declaretheorem[style=bold+qed, sibling=theorem,
	Refname={Lemma,Lemmas},
	refname={Lem.,Lems.},
]{lemma}
\declaretheorem[style=bold+qed, sibling=lemma,
	Refname={Proposition,Propositions},
	refname={Prop.,Props.},
]{proposition}
\declaretheorem[style=bold+qed, parent=theorem,
	Refname={Corollary,Corollaries},
	refname={Cor.,Cors.},
]{corollary}

\declaretheorem[style=bold+qed, parent=\toplevel,
	Refname={Conjecture,Conjectures},
	refname={Conj.,Conjs.},
]{conjecture}

\let\proof\@undefined
\declaretheorem[style=italic+qed, numbered=no]{proof}
\declaretheorem[style=italic+qed, numbered=no]{derivation}
